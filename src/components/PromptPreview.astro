---
/**
 * PromptPreview Component
 * Displays the live-generated prompt preview with syntax highlighting
 */
---

<div class="prompt-preview-container">
  <div class="preview-content" data-testid="preview-content">
    <p class="preview-placeholder">
      Start building your prompt by filling in the form fields and selecting techniques.
      Your generated prompt will appear here in real-time.
    </p>
  </div>
</div>

<style>
  .prompt-preview-container {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .preview-content {
    flex: 1;
    min-height: 200px;
    max-height: 400px;
    overflow-y: auto;
    padding: var(--space-4);
    background: var(--surface-overlay);
    border: 1px solid var(--border-default);
    border-radius: var(--radius-md);
    font-family: var(--font-mono);
    font-size: var(--font-sm);
    line-height: 1.6;
    white-space: pre-wrap;
    word-break: break-word;
    color: var(--text-primary);
  }

  .preview-content::-webkit-scrollbar {
    width: 8px;
  }

  .preview-content::-webkit-scrollbar-track {
    background: transparent;
  }

  .preview-content::-webkit-scrollbar-thumb {
    background: var(--border-default);
    border-radius: 4px;
  }

  .preview-content::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
  }

  .preview-placeholder {
    color: var(--text-tertiary);
    font-style: italic;
    font-family: var(--font-sans);
    text-align: center;
    padding: var(--space-8) var(--space-4);
  }

  /* Syntax highlighting for different sections */
  :global(.preview-content .section-role) {
    color: var(--color-info);
  }

  :global(.preview-content .section-techniques) {
    color: var(--interactive-default);
  }

  :global(.preview-content .section-task) {
    color: var(--text-primary);
  }

  :global(.preview-content .section-context) {
    color: var(--color-warning);
  }

  :global(.preview-content .section-output) {
    color: var(--color-success);
  }

  :global(.preview-content .section-label) {
    display: block;
    font-weight: var(--font-semibold);
    font-size: var(--font-xs);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-1);
    opacity: 0.7;
  }

  :global(.preview-content .section-block) {
    display: block;
    margin-bottom: var(--space-4);
    padding: var(--space-3);
    background: color-mix(in srgb, var(--surface-default) 50%, transparent);
    border-radius: var(--radius-sm);
    border-left: 3px solid currentColor;
  }

  :global(.preview-content .technique-name) {
    font-weight: var(--font-bold);
  }

  :global(.preview-content .technique-desc) {
    opacity: 0.9;
  }
</style>
